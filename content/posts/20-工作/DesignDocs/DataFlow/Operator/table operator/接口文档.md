---
scope: work
draft: true
---
url前加  WebConstants.BASE_API_PATH (`base_url/api/v1/`)
# 工作区
## 创建工作区
url：/gluttony/workarea/create
方法:  post
参数：
参数类型："json"
返回：
返回类型: 
## 删除工作区


## 编辑工作区






# 数据集
## 创建数据集
url：/gluttony/workarea/dataset/create
方法:  post
参数：{"workAreaId":  ,   //工作区id (导入到哪个工作区)
           "name":          ,  //数据集名称
           "type":            ,  //数据集类别  csv、jdbc、clickhouse.........
           "storgePath"     //数据集地址   文件地址、表名........
}
参数类型："json"
返回：
返回类型


## 删除数据集
url：/gluttony/workarea/dataset/delete
方法:  post
参数：{"datasetId":          ,  //数据集id
}
参数类型："json"
返回：
返回类型:
## 查数据集
url：/gluttony/workarea/dataset/selectbywaid
方法:  post
参数：{"workAreaId":          ,  //工作区id
}
参数类型："json"
返回：工作区所有的dataset集合
返回类型:





# 快照

## 通过工作区查找相应快照列表



- url: /gluttony/workarea/snapshot/list-by-workarea
- 请求方法: POST
- 参数: 

```JSON
{
    "id": 必需，工作区ID
}
```



- 返回数据:

```JSON
// 示例请求：
{"id": 5}
// 返回数据:
{
    "msg": "ok",
    "data": [
        {
            "id": 1,
            "fkWorkAreaId": 5,
            "snapString": "power limit",
            "createTime": "2020-09-15 14:23:36"
        },
        {
            "id": 19,
            "fkWorkAreaId": 5,
            "snapString": "power unlimited",
            "createTime": "2021-10-15 21:19:31"
        }
    ]
}
```

## 获取单条快照

- url: /gluttony/workarea/snapshot/get
- 请求方法: POST
- 参数: 

```JSON
{
    "id": 必需，快照ID
}
```



- 返回数据：

```JSON
// 示例请求：
{"id": 1}
// 返回数据：
{
    "msg": "ok",
    "data": {
        "id": 1,
        "fkWorkAreaId": 5,
        "snapString": "power limit",
        "createTime": "2020-09-15 14:23:36"
    }
}
```

## 单条快照创建或更新

- url: /gluttony/workarea/snapshot/modify
- 请求方法: POST
- 参数: 

```json
{
    "id": 如果修改数据，必需提供快照ID，创建快照不提供快照ID,
    "fkWorkAreaId": 工作区ID，创建快照必须提供,
    "snapString": 由前端生成的快照（字符串），必需提供,
    "createTime": 快照创建时间，可选。
}
```



- 返回数据: 

```json
// 示例请求：
{
    "id": 19, // id由后端生成, 创建快照时不必提供
    "fkWorkAreaId": 5,
    "snapString": "power unlimited"
}
// 返回数据
{
    "msg": "ok",
    "success": true
}
```

## 批量快照创建或更新

- url: /gluttony/workarea/snapshot/modify-batch
- 请求方式: POST
- 参数:

```json
[
    {
        ...内部结构和创建或更新单条快照时相同
    },
    {
        ...
    }
]
```



- 返回数据: 

```json
// 示例请求：
[
        {
            "id": 1,
            "fkWorkAreaId": 5,
            "snapString": "power limit",
            "createTime": "2020-09-15 14:23:36"
        },
        {
            "id": 19,
            "fkWorkAreaId": 5,
            "snapString": "power unlimited",
            "createTime": "2021-10-15 21:19:31"
        }
    ]
// 返回数据：
{
    "msg": "ok",
    "data": true
}
```

## 删除单条快照

- url: /gluttony/workarea/snapshot/delete
- 请求方式: POST
- 参数: 与查询单条快照相同，只提供`id`即可，其他数据可选。

- 返回数据: 

```json
// 示例请求：
{
    "id": 20
}
// 返回数据：
{
    "msg": "ok",
    "success": true
}
```

## 批量删除快照

- url: /gluttony/workarea/snapshot/delete-batch
- 请求方式: POST
- 参数: 删除单条快照的参数所构成的json数组。

```json
[
    {
        "id": xx,
        "snapString": xx,
    },
    {
        "id": xx.
    },
    ...
]
```



- 返回数据: 

```json
// 示例请求：
[
    {
        "id": 20 // 一条不存在的数据
    },
    {
        "id": 21
    }
]
// 返回数据：
{
    "msg": "ok",
    "data": true
}
```

